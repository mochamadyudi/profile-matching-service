(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[68],{729:function(e,t,s){"use strict";var n=s(0),o=s.n(n),a=s(653),i=s(2),r=o.a.forwardRef((function(e,t){return Object(i.jsx)(a.a,{component:e.svg,className:e.className})}));t.a=r},738:function(e,t,s){"use strict";var n=s(104),o=s.n(n),a=s(53),i=s(74).a(),r=s(45),l=s(409),c=o.a.create({baseURL:a.a,timeout:6e4}),u="/auth/login";c.interceptors.request.use((function(e){var t=localStorage.getItem(r.b);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(i.push(u),window.location.reload()),e}),(function(e){l.a.error({message:"Error"}),Promise.reject(e)})),c.interceptors.response.use((function(e){return e.data}),(function(e){var t={message:""};return 400!==e.response.status&&403!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(r.b),i.push(u),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),l.a.error(t),Promise.reject(e)}));var d=c,m={login:function(e){return d({url:"/posts",method:"post",headers:{"public-request":"true"},data:e})},signUp:function(e){return d({url:"/auth/signup",method:"post",headers:{"public-request":"true"},data:e})}};t.a=m},837:function(e,t,s){"use strict";s.r(t);var n=s(0),o=s(1),a=s(10),i=s(56),r=s(19),l=s(408),c=s(838),u=s(657),d=s(402),m=s(89),v=s(689),h=s(715),j=(s(78),s(729),s(61)),g=(s(738),s(58)),f=s(739),p=s(57),b=s(2),x=function(e){var t=Object(g.g)(),s=e.otherSignIn,o=e.showForgetPassword,r=e.hideAuthMessage,j=e.onForgetPasswordClick,x=e.showLoading,O=e.extra,w=e.loading,k=e.showMessage,y=(e.authenticated,e.showAuthMessage),I=e.token,P=e.redirect,_=e.allowRedirect,N=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(),"fakeToken",x(),!/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(null===t||void 0===t?void 0:t.email)){e.next=7;break}return e.next=7,new p.a({url:"/api/v1/auth/signin",body:t}).post().then((function(e){var t,s;console.log({response:e});var n,o=null!==(t=null===e||void 0===e?void 0:e.data)&&void 0!==t?t:void 0;null!==o&&void 0!==o&&null!==(s=o.profile)&&void 0!==s&&s.user_id&&localStorage.setItem("userId",null===o||void 0===o||null===(n=o.profile)||void 0===n?void 0:n.user_id);if(null!==e&&void 0!==e&&e.success){var a,i,r,c,u,d,m,v,h;if("undefined"!==typeof(null===o||void 0===o||null===(a=o.tokens)||void 0===a?void 0:a.access_token)&&""!==(null===o||void 0===o||null===(i=o.tokens)||void 0===i?void 0:i.access_token)&&null!==(null===o||void 0===o||null===(r=o.tokens)||void 0===r?void 0:r.access_token))localStorage.setItem("token",null===o||void 0===o||null===(v=o.tokens)||void 0===v?void 0:v.access_token);else localStorage.removeItem("token");if("undefined"!==typeof(null===o||void 0===o||null===(c=o.tokens)||void 0===c?void 0:c.access_token)&&""!==(null===o||void 0===o||null===(u=o.tokens)||void 0===u?void 0:u.access_token)&&null!==(null===o||void 0===o||null===(d=o.tokens)||void 0===d?void 0:d.access_token))localStorage.setItem("refresh_token",null===o||void 0===o||null===(h=o.tokens)||void 0===h?void 0:h.refresh_token);else localStorage.removeItem("refresh_token");l.b.success(null!==(m=null===e||void 0===e?void 0:e.message)&&void 0!==m?m:"Successfully!"),setTimeout((function(){window.location.href="/"}),1e3)}else y(null===e||void 0===e?void 0:e.message)})).catch((function(e){y(null===e||void 0===e?void 0:e.message)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){null!==I&&_&&t.push(P),k&&setTimeout((function(){r()}),3e3)}));var S=Object(b.jsx)("div",{});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.a.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:k?1:0,marginBottom:k?20:0},children:Object(b.jsx)(c.a,{type:"error",showIcon:!0,message:null===e||void 0===e?void 0:e.message})}),Object(b.jsxs)(u.a,{layout:"vertical",name:"login-form",onFinish:N,children:[Object(b.jsx)(u.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"Please enter a validate email!"}],children:Object(b.jsx)(d.a,{prefix:Object(b.jsx)(v.a,{className:"text-primary"})})}),Object(b.jsx)(u.a.Item,{name:"password",label:Object(b.jsxs)("div",{className:"".concat(o?"d-flex justify-content-between w-100 align-items-center":""),children:[Object(b.jsx)("span",{children:"Password"}),o&&Object(b.jsx)("span",{onClick:function(){return j},className:"cursor-pointer font-size-sm font-weight-normal text-muted",children:"Forget Password?"})]}),rules:[{required:!0,message:"Please input your password"}],children:Object(b.jsx)(d.a.Password,{prefix:Object(b.jsx)(h.a,{className:"text-primary"})})}),Object(b.jsx)(u.a.Item,{children:Object(b.jsx)(m.a,{type:"primary",htmlType:"submit",block:!0,loading:w,children:"Sign In"})}),s?S:null,O]})]})};x.defaultProps={otherSignIn:!0,showForgetPassword:!1};var O={showAuthMessage:j.e,showLoading:j.f,hideAuthMessage:j.d,authenticated:j.c},w=Object(r.b)((function(e){var t=e.auth;return{loading:t.loading,message:t.message,showMessage:t.showMessage,token:t.token,redirect:t.redirect}}),O)(x),k=s(134),y=s(86),I=s(640),P=function(e){Object(r.c)((function(e){return e.theme.currentTheme}));return Object(b.jsx)("div",{className:"h-100",children:Object(b.jsx)("div",{className:"container d-flex flex-column justify-content-center h-100",children:Object(b.jsx)(k.a,{justify:"center",children:Object(b.jsx)(y.a,{xs:20,sm:20,md:20,lg:7,children:Object(b.jsx)(I.a,{children:Object(b.jsxs)("div",{className:"my-4",children:[Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)("img",{className:"fluid mb-3",src:"/".concat("logo.png"),alt:"logo-fids-notifbox",style:{height:"26px",objectFit:"contain"}})}),Object(b.jsx)(k.a,{justify:"center",children:Object(b.jsx)(y.a,{xs:24,sm:24,md:20,lg:20,children:Object(b.jsx)(w,Object(o.a)({},e))})})]})})})})})})};t.default=function(){return Object(b.jsx)(P,{allowRedirect:!0})}}}]);
//# sourceMappingURL=68.6c9bc91a.chunk.js.map